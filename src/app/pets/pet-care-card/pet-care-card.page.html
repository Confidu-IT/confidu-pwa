<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>CareCard</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div *ngIf="isLoading" class="ion-text-center">
    <ion-spinner color="primary"></ion-spinner>
  </div>

  <div *ngIf="!isLoading" class="care-card-header">
    <div class="care-card-header-image">
      <img [src]="pet?.pet.image" alt="">
    </div>
    <div class="care-card-header-label">
      <h2>{{ 'CARE_CARD_PAGE.HEADER' | translate }} {{ pet?.pet.name }}</h2>
    </div>
  </div>
  <div class="spacer"></div>

  <ion-grid *ngIf="!isLoading">
    <ion-row class="ion-hide-md-up">
      <ion-col size="12">
        <mat-expansion-panel class="base-panel">
          <mat-expansion-panel-header>
            <mat-panel-title>
              <div class="panel-title-content">
                <div class="img">
                  <img class="base-image" [src]="baseDataImg" alt="">
                </div>
                <div class="label">
                  {{ 'CARE_CARD_PAGE.BASE_DATA.TITLE' | translate }}
                </div>
              </div>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="base-data">
            <ul>
              <li>
                <div class="label">{{ 'CARE_CARD_PAGE.BASE_DATA.LIST.NAME' | translate }}</div>
                <div class="value">{{ pet?.pet.name }}</div>
              </li>
              <li>
                <div class="label">{{ 'CARE_CARD_PAGE.BASE_DATA.LIST.GENDER' | translate }}</div>
                <div class="value">{{ pet?.pet.gender.label[this.language] }}</div>
              </li>
              <li (click)="presentModal('castration')" *ngIf="!isCastrated">
                <div class="label">{{ 'CARE_CARD_PAGE.BASE_DATA.LIST.CASTRATION' | translate }}</div>
                <div class="value">
                  {{ pet?.pet.castration.label[this.language] }}
                  <ion-icon name="chevron-forward-outline"></ion-icon>
                </div>
              </li>
              <li *ngIf="isCastrated">
                <div class="label">{{ 'CARE_CARD_PAGE.BASE_DATA.LIST.CASTRATION' | translate }}</div>
                <div class="value">
                  {{ castrationLabel || pet?.pet.castration.label[this.language] }}
                </div>
              </li>
              <li>
                <div class="label">{{ 'CARE_CARD_PAGE.BASE_DATA.LIST.BREED' | translate }}</div>
                <div class="value">{{ breed }}</div>
              </li>
              <li>
                <div class="label">{{ 'CARE_CARD_PAGE.BASE_DATA.LIST.BIRTHDAY' | translate }}</div>
                <div class="value">{{ pet?.pet.birthday.seconds * 1000 | date: 'dd.MM.yyyy' }}</div>
              </li>
              <li (click)="presentModal('id')" *ngIf="!hasId">
                <div class="label">{{ 'CARE_CARD_PAGE.BASE_DATA.LIST.ID' | translate }}</div>
                <div class="value">
                  {{ pet?.pet.petIdent || noData }}
                  <ion-icon name="chevron-forward-outline"></ion-icon>
                </div>
              </li>
              <li *ngIf="hasId">
                <div class="label">{{ 'CARE_CARD_PAGE.BASE_DATA.LIST.ID' | translate }}</div>
                <div class="value">{{ pet?.pet.petIdent || noData }}</div>
              </li>
            </ul>
          </div>
        </mat-expansion-panel>

        <div *ngIf="panels">
          <ng-container *ngFor="let panel of panels">
            <mat-expansion-panel>
              <mat-expansion-panel-header>
                <mat-panel-title>
                  <div class="panel-title-content">
                    <div class="img">
                      <img [src]="panel?.icon" alt="">
                    </div>
                    <div class="label">
                      {{ panel?.label }}
                      <span *ngIf="panel?.signal" class="signal"></span>
                    </div>
                  </div>
                </mat-panel-title>
              </mat-expansion-panel-header>
              <ul *ngIf="panel.data" class="submenu">
                <li (click)="onClickLink(el)" *ngFor="let el of panel.data">
                  <div class="label">
                    {{ el.label }}
                  </div>
                  <div class="value">
                    <img [src]="el.icon" alt="" height="16">
                    <p>{{ el.value }}</p>
                  </div>
<!--                  <img [src]="chevron" alt="" height="16" width="16">-->
                    <ion-icon name="chevron-forward-outline"></ion-icon>
                </li>
              </ul>
            </mat-expansion-panel>
          </ng-container>
        </div>
      </ion-col>
    </ion-row>

    <ion-row *ngIf="!isLoading" class="ion-hide-md-down">
      <ion-col size="6">
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <div class="panel-title-content">
                <div class="img">
                  <img class="base-image" [src]="baseDataImg" alt="">
                </div>
                <div class="label">
                  {{ 'CARE_CARD_PAGE.BASE_DATA.TITLE' | translate }}
                </div>
              </div>
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div class="base-data">
            <ul>
              <li>
                <div class="label">{{ 'CARE_CARD_PAGE.BASE_DATA.LIST.NAME' | translate }}</div>
                <div class="value">{{ pet?.pet.name }}</div>
              </li>
              <li>
                <div class="label">{{ 'CARE_CARD_PAGE.BASE_DATA.LIST.GENDER' | translate }}</div>
                <div class="value">{{ pet?.pet.gender.label[this.language] }}</div>
              </li>
              <li (click)="presentModal('castration')" *ngIf="!isCastrated">
                <div class="label">{{ 'CARE_CARD_PAGE.BASE_DATA.LIST.CASTRATION' | translate }}</div>
                <div class="value">
                  {{ pet?.pet.castration.label[this.language] }}
                  <ion-icon name="chevron-forward-outline"></ion-icon>
                </div>
              </li>
              <li *ngIf="isCastrated">
                <div class="label">{{ 'CARE_CARD_PAGE.BASE_DATA.LIST.CASTRATION' | translate }}</div>
                <div class="value">
                  {{ castrationLabel || pet?.pet.castration.label[this.language] }}
                </div>
              </li>
              <li>
                <div class="label">{{ 'CARE_CARD_PAGE.BASE_DATA.LIST.BREED' | translate }}</div>
                <div class="value">{{ breed }}</div>
              </li>
              <li>
                <div class="label">{{ 'CARE_CARD_PAGE.BASE_DATA.LIST.BIRTHDAY' | translate }}</div>
                <div class="value">{{ pet?.pet.birthday.seconds * 1000 | date: 'dd. MM. yyyy' }}</div>
              </li>
              <li (click)="presentModal('id')" *ngIf="!hasId">
                <div class="label">{{ 'CARE_CARD_PAGE.BASE_DATA.LIST.ID' | translate }}</div>
                <div class="value">
                  {{ pet?.pet.petIdent || noData }}
                  <ion-icon name="chevron-forward-outline"></ion-icon>
                </div>
              </li>
              <li *ngIf="hasId">
                <div class="label">{{ 'CARE_CARD_PAGE.BASE_DATA.LIST.ID' | translate }}</div>
                <div class="value">{{ pet?.pet.petIdent || noData }}</div>
              </li>
            </ul>
          </div>
        </mat-expansion-panel>

        <div *ngIf="panels">
          <ng-container *ngFor="let panel of panels; let i = index">

            <mat-expansion-panel *ngIf="i < 3">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  <div class="panel-title-content">
                    <div class="img" *ngIf="panel?.icon">
                      <img [src]="panel?.icon" alt="">
                    </div>
                    <div class="label">
                      {{ panel?.label }}
                      <span *ngIf="panel?.signal" class="signal"></span>
                    </div>
                  </div>
                </mat-panel-title>
              </mat-expansion-panel-header>
              <ul *ngIf="panel.data" class="submenu">
                <li (click)="onClickLink(el)" *ngFor="let el of panel.data">
                  <div class="label">
                    {{ el.label }}
                  </div>
                  <div class="value">
                    <img [src]="el.icon" alt="" height="16">
                    <p>{{ el.value }}</p>
                  </div>
                  <ion-icon name="chevron-forward-outline"></ion-icon>
                </li>
              </ul>
            </mat-expansion-panel>
          </ng-container>
        </div>
      </ion-col>
      <ion-col size="6">
        <div *ngIf="panels">
          <ng-container *ngFor="let panel of panels; let i = index">
            <mat-expansion-panel *ngIf="i >= 3">
              <mat-expansion-panel-header>
                <mat-panel-title>
                  <div class="panel-title-content">
                    <div class="img">
                      <img [src]="panel?.icon" alt="">
                    </div>
                    <div class="label">
                      {{ panel?.label }}
                      <span *ngIf="panel?.signal" class="signal"></span>
                    </div>
                  </div>
                </mat-panel-title>
              </mat-expansion-panel-header>
              <ul *ngIf="panel.data" class="submenu">
                <li (click)="onClickLink(el)" *ngFor="let el of panel.data">
                  <div class="label">
                    {{ el.label }}
                  </div>
                  <div class="value">
                    <img [src]="el.icon" alt="" height="16">
                    <p>{{ el.value }}</p>
                  </div>
                  <ion-icon name="chevron-forward-outline"></ion-icon>
                </li>
              </ul>
            </mat-expansion-panel>
          </ng-container>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>

<ion-footer>
  <app-toolbar-footer [user]="user"></app-toolbar-footer>
</ion-footer>
